<!doctype html>

<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />
  <title>오를 코인 예측 Top 10</title>
  <style>
    :root{--bg:#0b1020;--card:#121934;--muted:#9fb0ff;--text:#e8ecff;--good:#2ecc71;--bad:#ff5e6b;--border:rgba(255,255,255,.1)}
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;background:linear-gradient(180deg,#0b1020,#090e1d 40%,#0b1020);color:var(--text)}
    header{position:sticky;top:0;background:rgba(11,16,32,.72);border-bottom:1px solid var(--border);backdrop-filter:blur(10px);text-align:center}
    .wrap{max-width:1000px;margin:0 auto;padding:14px}
    h1{font-size:22px;margin:6px 0;display:flex;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap}
    .badge{background:linear-gradient(180deg,#6c8bff,#4f6df8);padding:4px 10px;border-radius:999px;font-size:11px;font-weight:800;color:#fff}
    .date-today{font-size:28px;font-weight:700;color:#e8ecff;margin:6px 0}
    .sub{font-size:12px;color:var(--muted)}
    .card{background:#121934;border:1px solid var(--border);border-radius:14px;margin:10px 0}
    .card-inner{padding:12px}
    .status{display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted);justify-content:center}
    .dot{width:8px;height:8px;border-radius:50%;background:#aaa}.dot.ok{background:#12d18e}.dot.err{background:#ff5e6b}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 8px;border-bottom:1px solid var(--border);font-size:13px}
    th{background:#121934;position:sticky;top:0;font-weight:700;color:#cfe1ff;text-align:left}
    .num{text-align:right;font-variant-numeric:tabular-nums}
    .chip{padding:3px 6px;border-radius:999px;font-size:11px;font-weight:700}
    .chip.good{background:rgba(46,204,113,.15);color:var(--good)}
    .chip.bad{background:rgba(255,94,107,.15);color:var(--bad)}
    .scorebar{height:8px;border-radius:999px;background:#0d1430;border:1px solid var(--border);overflow:hidden}
    .scorebar>i{display:block;height:100%;background:linear-gradient(90deg,#5f7cff,#2ae59b);width:0%}
    footer{font-size:12px;color:var(--muted);padding:14px 0 30px;text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="date-today" id="today"></div>
      <h1>요한 추천 오늘 오를 코인 <span class="badge">예측 TOP 10</span></h1>
      <div class="sub">CoinGecko 데이터 기반 api 참고함</div>
      <div class="status" id="status"><span class="dot" id="dot"></span><span id="statusText">준비</span></div>
    </div>
  </header>  <main class="wrap">
    <section class="card">
      <div class="card-inner">
        <h3>예측 Top 10</h3>
        <div style="overflow:auto; max-height:70vh">
          <table>
            <thead>
              <tr>
                <th>#</th><th>코인</th><th class="num">가격</th><th class="num">1h%</th><th class="num">24h%</th><th>예측 스코어</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>  <footer>© <span id="year"></span> — </footer><script>
(async function(){
  const qs=s=>document.querySelector(s);
  const $tbody=qs('#tbody'); const $status=qs('#statusText'); const $dot=qs('#dot');
  function setStatus(ok,msg){$status.textContent=msg;$dot.className='dot '+(ok?'ok':'err');}
  function nf(v){return new Intl.NumberFormat('ko-KR',{style:'currency',currency:'KRW',maximumFractionDigits:0}).format(v)}
  function pf(v){if(!isFinite(v))return '–';return (v>0?'+':'')+v.toFixed(2)+'%'}

  async function fetchData(){
    const url='https://api.coingecko.com/api/v3/coins/markets?vs_currency=krw&order=market_cap_desc&per_page=100&page=1&sparkline=false&price_change_percentage=1h,24h';
    const res=await fetch(url); if(!res.ok) throw new Error(res.statusText); return res.json();
  }

  async function run(){
    try{
      setStatus(true,'데이터 불러오는 중…');
      let data=await fetchData();

      data=data.map(c=>{
        const s=( (c.price_change_percentage_1h_in_currency||0)*0.7 + (c.price_change_percentage_24h_in_currency||0)*0.3 );
        return {...c, score:s};
      }).sort((a,b)=>b.score-a.score).slice(0,10);

      $tbody.innerHTML=data.map((c,i)=>{
        const cls1=(c.price_change_percentage_1h_in_currency||0)>=0?'good':'bad';
        const cls2=(c.price_change_percentage_24h_in_currency||0)>=0?'good':'bad';
        const scorePct=Math.max(0,Math.min(100,c.score+50));
        return `<tr><td class="num">${i+1}</td><td><div class="coin"><img src="${c.image}" width=18 height=18 style="vertical-align:middle;border-radius:50%"> ${c.name} <span class="muted">${String(c.symbol).toUpperCase()}</span></div></td><td class="num">${nf(c.current_price)}</td><td class="num"><span class="chip ${cls1}">${pf(c.price_change_percentage_1h_in_currency||0)}</span></td><td class="num"><span class="chip ${cls2}">${pf(c.price_change_percentage_24h_in_currency||0)}</span></td><td><div class="scorebar"><i style="width:${scorePct}%"></i></div><div class="muted">${c.score.toFixed(2)}</div></td></tr>`;
      }).join('');

      setStatus(true,'완료 · 예측 Top 10');
    }catch(e){setStatus(false,'오류: '+e.message)}
  }

  const today=new Date();
  qs('#today').textContent=today.getFullYear()+"-"+(today.getMonth()+1).toString().padStart(2,'0')+"-"+today.getDate().toString().padStart(2,'0');
  qs('#year').textContent=new Date().getFullYear();
  run();
})();
</script></body>
</html>
